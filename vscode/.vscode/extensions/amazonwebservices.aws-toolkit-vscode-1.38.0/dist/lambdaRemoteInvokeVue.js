(()=>{"use strict";var $={744:(e,u)=>{var c;c={value:!0},u.Z=(v,b)=>{for(const[E,y]of b)v[E]=y;return v}}},N={};function h(e){var u=N[e];if(u!==void 0)return u.exports;var c=N[e]={exports:{}};return $[e](c,c.exports,h),c.exports}h.r=e=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var L={};(()=>{h.r(L);const e=Vue,u={id:"app"},c={style:{"margin-bottom":"5px","margin-top":"0","margin-right":"5px"}},v={style:{"margin-top":"0"}},b=(0,e.createElementVNode)("h3",null,"Select a file to use as payload:",-1),E=(0,e.createElementVNode)("br",null,null,-1),y=(0,e.createElementVNode)("h3",null,"Or, use a sample request payload from a template:",-1),D=(0,e.createElementVNode)("option",{disabled:"",value:""},"Select an example input",-1),V=["value"],x=(0,e.createElementVNode)("br",null,null,-1),T=(0,e.createElementVNode)("br",null,null,-1),R=(0,e.createElementVNode)("br",null,null,-1),O=(0,e.createElementVNode)("br",null,null,-1);function C(n,t,o,a,r,i){return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,null,[(0,e.createElementVNode)("h1",null,"Invoke function "+(0,e.toDisplayString)(n.initialData.FunctionName),1),(0,e.createElementVNode)("div",u,[(0,e.createElementVNode)("p",c,"ARN: "+(0,e.toDisplayString)(n.initialData.FunctionArn),1),(0,e.createElementVNode)("p",v,"Region: "+(0,e.toDisplayString)(n.initialData.FunctionRegion),1),b,(0,e.createElementVNode)("div",null,[(0,e.createElementVNode)("button",{onClick:t[0]||(t[0]=(...s)=>n.promptForFileLocation&&n.promptForFileLocation(...s))},"Choose File"),(0,e.createTextVNode)(" \xA0 "+(0,e.toDisplayString)(n.selectedFile),1)]),E,y,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.selectedSampleRequest=s),onChange:t[2]||(t[2]=(...s)=>n.newSelection&&n.newSelection(...s))},[D,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.initialData.InputSamples,s=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:s,value:s.filename},(0,e.toDisplayString)(s.name),9,V))),128))],544),[[e.vModelSelect,n.selectedSampleRequest]]),x,T,(0,e.withDirectives)((0,e.createElementVNode)("textarea",{rows:"20",cols:"90","onUpdate:modelValue":t[3]||(t[3]=s=>n.sampleText=s)},null,512),[[e.vModelText,n.sampleText]]),R,(0,e.createElementVNode)("input",{type:"submit",onClick:t[4]||(t[4]=(...s)=>n.sendInput&&n.sendInput(...s)),value:"Invoke"}),O])],64)}/*!
 * Copyright 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */class _{static registerGlobalCommands(){const t=new Event("remount");window.addEventListener("message",o=>{const{command:a}=o.data;a==="$clear"&&(vscode.setState({}),this.messageListeners.forEach(r=>this.removeListener(r)),window.dispatchEvent(t))})}static addListener(t){this.messageListeners.add(t),window.addEventListener("message",t)}static removeListener(t){this.messageListeners.delete(t),window.removeEventListener("message",t)}static sendRequest(t,o,a){const r=JSON.parse(JSON.stringify(a)),i=new Promise((s,p)=>{const l=f=>{const d=f.data;if(t===d.id)if(this.removeListener(l),window.clearTimeout(m),d.error===!0){const S=JSON.parse(d.data);p(new Error(S.message))}else d.event?(typeof a[0]!="function"&&p(new Error(`Expected frontend event handler to be a function: ${o}`)),s(this.registerEventHandler(o,a[0]))):s(d.data)},m=setTimeout(()=>{this.removeListener(l),p(new Error(`Timed out while waiting for response: id: ${t}, command: ${o}`))},3e5);this.addListener(l)});return vscode.postMessage({id:t,command:o,data:r}),i}static registerEventHandler(t,o){const a=r=>{const i=r.data;if(i.command===t){if(!i.event)throw new Error(`Expected backend handler to be an event emitter: ${t}`);o(i.data)}};return this.addListener(a),{dispose:()=>this.removeListener(a)}}static create(){return this.initialized||(this.initialized=!0,this.registerGlobalCommands()),new Proxy({},{set:()=>{throw new TypeError("Cannot set property to webview client")},get:(t,o)=>{var a;if(typeof o!="string"){console.warn(`Tried to index webview client with non-string property: ${String(o)}`);return}if(o==="init"){const i=(a=vscode.getState())!=null?a:{};if(i.__once)return()=>Promise.resolve();vscode.setState(Object.assign(i,{__once:!0}))}const r=(this.counter++).toString();return(...i)=>this.sendRequest(r,o,i)}})}}_.counter=0,_.initialized=!1,_.messageListeners=new Set;/*!
 * Copyright 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */const g=new Set;window.addEventListener("remount",()=>g.clear());const q={created(){var n,t,o,a,r;if(this.$data===void 0)return;const i=(n=vscode.getState())!=null?n:{};this.$options._count=((t=this.$options._count)!=null?t:0)+1;const s=(a=this.id)!=null?a:`${(o=this.name)!=null?o:`DEFAULT-${g.size}`}-${this.$options._count}`;if(this.$options._unid=s,g.has(s)){console.warn(`Component "${s}" already exists. State-saving functionality will be disabled.`);return}g.add(s);const p=(r=i[s])!=null?r:{};Object.keys(this.$data).forEach(l=>{var m;this.$data[l]=(m=p[l])!=null?m:this.$data[l]}),Object.keys(this.$data).forEach(l=>{this.$watch(l,m=>{var f,d;const S=(f=vscode.getState())!=null?f:{},B=Object.assign((d=S[s])!=null?d:{},{[l]:JSON.parse(JSON.stringify(m))});vscode.setState(Object.assign(S,{[s]:B}))},{deep:!0})})}},w=_.create(),A={FunctionName:"",FunctionArn:"",FunctionRegion:"",InputSamples:[]},I=(0,e.defineComponent)({async created(){var n;this.initialData=(n=await w.init())!=null?n:this.initialData},data(){return{initialData:{...A},selectedSampleRequest:"",sampleText:"",error:void 0,payload:{},statusCode:"",logs:"",showResponse:!1,isLoading:!1,selectedFile:""}},mounted(){this.$nextTick(function(){window.addEventListener("message",this.handleMessageReceived)})},methods:{newSelection:function(){w.handler({command:"sampleRequestSelected",requestName:this.selectedSampleRequest})},promptForFileLocation:function(){w.handler({command:"promptForFile"})},handleMessageReceived:function(n){const t=n.data;switch(t.command){case"loadedSample":this.loadSampleText(t.sample),this.selectedFile=t.selectedFile;break;case"invokedLambda":if(this.showResponse=!0,this.error=void 0,this.payload="",this.statusCode="",this.logs="",t.error)this.error=t.error;else{let o;try{o=JSON.parse(t.payload)}catch(a){o=t.payload}this.payload=o,this.statusCode=t.statusCode,this.logs=t.logs}this.isLoading=!1;break}},loadSampleText:function(n){this.sampleText=n},sendInput:function(){this.isLoading=!0,w.handler({command:"invokeLambda",region:this.initialData.FunctionRegion,functionArn:this.initialData.FunctionArn,functionName:this.initialData.FunctionName,json:this.sampleText})}},mixins:[q]});var M=h(744);const j=(0,M.Z)(I,[["render",C]]);/*!
 * Copyright 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */const F=()=>(0,e.createApp)(j),k=F();k.mount("#vue-app"),window.addEventListener("remount",()=>{k.unmount(),F().mount("#vue-app")})})(),module.exports=L})();

//# sourceMappingURL=lambdaRemoteInvokeVue.js.map